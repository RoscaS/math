<!DOCTYPE html>
<html>

    <head>
        <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/cpp/cpp-semantiqueCopie.html">
  <link rel="alternate" type="application/rss+xml" title="RoscaS" href="http://localhost:4000/feed.xml">

<!-- JS -->
  <!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> -->
  <script src="/js/mermaid.min.js"></script>

</head>


        
          <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
  ga('create', 'UA-99742998-1', 'auto');
  ga('send', 'pageview');
    
	</script>


        

        
    </head>

    <body>
        <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Cpp: Semantique de copie (rappel)</title>
  <meta name="description" content="Rappel: types d’initialisation:">
</head>


        <div class="wrapper">
            <header class="post-header">
	
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>


    <center>
		<div class="post-title" itemprop="name headline">Cpp: Semantique de copie (rappel)</div>

		<div class="post-meta"><i class="fa fa-calendar-o"></i> <time datetime="21 Jun 2017" itemprop="datePublished">Jun 21 2017</time>

			&nbsp;&nbsp;•&nbsp;&nbsp;<i class="fa fa-user-secret"></i> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Sol</span>
        	
			<br>
			<i class="fa fa-eye"></i> <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-pulse"></i></span>clicks</span>
		</div>

        	
        <div class="post-tags">
        	
			<a class="post-tags-item" href="http://localhost:4000/tags/">cpp</a>
        	
			
		</div>
    </center>

<div class="wrapper">

    <center>      
		<p>
			<a class="link" href="/">Home</a> /
			<a class="link" href="/archive/">Archive</a> /
			<a class="link" href="/category/">Category</a> / 
			<a class="link" href="/tags/">Tags</a> / 
			<a class="link" href="/about/">About</a> /
			<a class="link" href="/contact/">Contact</a>
    	</p>
    </center>
</div>
    
</header>

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<div class="post-content">
    <center>
	
    </center>
	<h2>Directory</h2>
</div>

<div id="category"></div>

<div class="post-content" itemprop="articleBody">
    <h2 id="rappel-types-dinitialisation">Rappel: types d’initialisation:</h2>

<div class="language-cpp highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Fraction</span> <span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">m_num</span><span class="p">;</span> <span class="kt">int</span> <span class="n">m_den</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">Fraction</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">int</span> <span class="n">den</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">m_num</span> <span class="o">=</span> <span class="n">num</span><span class="p">;</span> <span class="n">m_den</span> <span class="o">=</span> <span class="n">den</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">friend</span> <span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">&lt;&lt;</span>
        <span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span><span class="o">&amp;</span> <span class="n">f</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">f</span><span class="p">.</span><span class="n">m_num</span> <span class="o">&lt;&lt;</span> <span class="s">"/"</span> <span class="o">&lt;&lt;</span> <span class="n">f</span><span class="p">.</span><span class="n">m_den</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>
<h3 id="initialisation-directe">Initialisation <strong>$directe$</strong></h3>
<ul>
  <li><code class="highlighter-rouge">int x(5);</code> initialisation directe d’un objet de type <code class="highlighter-rouge">int</code></li>
  <li><code class="highlighter-rouge">Fraction f1(5,4);</code> initiasation directe d’un objet de type <code class="highlighter-rouge">Fraction</code>
    <ul>
      <li>$ \Rightarrow $ appelle le cstr de <code class="highlighter-rouge">Fraction(int,int)</code></li>
    </ul>
  </li>
</ul>

<h3 id="initialisation-uniforme">Initialisation <strong>$uniforme$</strong></h3>
<ul>
  <li><code class="highlighter-rouge">int y{5};</code> initialisation uniforme d’un objet de type <code class="highlighter-rouge">int</code></li>
  <li><code class="highlighter-rouge">Fraction f2{5,3};</code>  initialisation uniforme d’un objet de type ‘Fraction`
    <ul>
      <li>$ \Rightarrow $ appelle le cstr de <code class="highlighter-rouge">Fraction(int,int)</code></li>
    </ul>
  </li>
</ul>

<h3 id="initialisation-par-copie">Initialisation par <strong>$copie$</strong></h3>
<ul>
  <li><code class="highlighter-rouge">int z = 6;</code> initialisation par copie d’un objet de type <code class="highlighter-rouge">int</code></li>
  <li><code class="highlighter-rouge">Fraction f3 = Fraction(6);</code> initialisation par copie d’un objet de type <code class="highlighter-rouge">Fraction</code>
    <ul>
      <li>$\Rightarrow$ appelle le constructeur <code class="highlighter-rouge">Fraction(6,1)</code> <strong>ou</strong> le cstr de copie. Ce dernier n’est généralement pas le premier choix du compilateur pour raison de performance.</li>
      <li>Cette façon de faire est évaluée de la même façon que le serait <code class="highlighter-rouge">Fractionf3(fraction(6));</code></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">Fraction f4 = 7;</code> initialisation par copie d’un objet de type <code class="highlighter-rouge">Fraction</code>.
    <ul>
      <li>$\Rightarrow$ le compilateur va tenter de trouver une façon de convertir 7 en un objet de type <code class="highlighter-rouge">Fraction</code> ce qui va invoquer le cstr <code class="highlighter-rouge">Fraction(7,1)</code></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<blockquote>
  <p>Autre cas d’initialisation par copie:</p>
  <ul>
    <li>Passage d’une classe (objet de type…) comme argument</li>
    <li>Retour d’une classe (objet de type…)</li>
  </ul>

</blockquote>

<p><br /></p>

<h3 id="règle">Règle</h3>
<p><span style="color:red"><strong>Éviter l’initialisation par copie au profit de de l’initialisation uniforme</strong></span></p>

<h2 id="rappel-opérateur-daffectation-et-cstr-de-copie">Rappel: Opérateur d’affectation et cstr de copie</h2>
<p>Le constructeur de copie et l’opérateur d’assignation sont presque équivalents, les deux copient un objet dans un autre.</p>

<h4 id="opérateur-daffectation">Opérateur d’affectation</h4>
<p>Remplace le contenu d’objets préexistants (comme c’est une affectation, il assigne une valeur à un objet qui existe déja).</p>

<div class="language-cpp highlighter-rouge"><pre class="highlight"><code> <span class="kt">int</span> <span class="n">b</span><span class="p">;</span>  <span class="c1">// initialisation (contient du garbage)
</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>  <span class="c1">// affectation à un objet préexistant
</span></code></pre>
</div>

<p>Il est évident qu’on ne peut pas faire <code class="highlighter-rouge">b = 5;</code> sans avoir fait au préalable l’initialisation <code class="highlighter-rouge">int b;</code>. Dans la même logique: <code class="highlighter-rouge">f1 = (5,2);</code> doit être précédé de <code class="highlighter-rouge">Fraction f1;</code></p>

<h4 id="constructeur-de-copies">Constructeur de copies</h4>
<p>Initialise de nouveaux objets.</p>

<h3 id="règle-1">Règle</h3>
<ul>
  <li>
    <p><span style="color:red">si un nouvel objet doit être créé avant qu’une copie puisse se faire le cstr de copies est utilisé (inclut le passage d’objet en argument (par valeur) et le retour d’objets par valeur).</span></p>
  </li>
  <li>
    <p><span style="color:red">si un nouvel objet ne doit pas forcément être créé avant qu’une copie puisse se passer, on utilise l’opérateur d’affectation.</span></p>
  </li>
</ul>

</div>

<div>
	
	<div class="tbc"></div>
	
</div>

<!--<div class="share">
    <p>Share this post with: </p>
	<a href="https://twitter.com/intent/tweet?text=Cpp: Semantique de copie (rappel)@&amp;url=http://localhost:4000/cpp/cpp-semantiqueCopie.html" class="twitter-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/cpp/cpp-semantiqueCopie.html" class="facebook-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
		</span>
	</a>
    
	<a href="https://plus.google.com/share?url=http://localhost:4000/cpp/cpp-semantiqueCopie.html" class="googleplus-share">
		<span class="fa-stack fa-lg">
			<i class="fa fa-circle fa-stack-2x"></i>
			<i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
		</span>
	</a>
</div>
-->

<div id="disqus_thread"></div>


 
</div>


</article>

        </div>

    </body>

<footer class="site-footer">
    <div class="wrapper">
        <center>
            <p>
                <a class="link" href="/%20/">Home</a> /
                <a class="link" href="/archive/">Archive</a> /
                <a class="link" href="/category/">Category</a> /
                <a class="link" href="/tags/">Tags</a> /
                <a class="link" href="/about/">About</a> /
                <a class="link" href="/contact/">Contact</a>
            </p>
            <span><script>document.write(new Date().getFullYear());</script></span>
            <span>&copy;</span>

            <a href="mailto:sol.rosca@gmail.com?subject=Hello&nbsp;RoscaS"> RoscaS</a>
            <br>
        </center>
    </div>
</footer>

<foot>
    <foot>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Derictory -->

  <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
  <script src="http://yandex.st/highlightjs/6.2/highlight.min.js"></script>

<!-- Hit analytics -->

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!-- Directory -->

<script src="/js/main.js"></script>

</foot>

</foot>

</html>
